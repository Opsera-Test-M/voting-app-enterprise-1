# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║  NEW RELIC PYTHON AGENT CONFIGURATION                                         ║
# ║                                                                                ║
# ║  Environment variables override these settings:                                ║
# ║  • NEW_RELIC_LICENSE_KEY                                                       ║
# ║  • NEW_RELIC_APP_NAME                                                          ║
# ║  • NEW_RELIC_HOST (for mock server)                                            ║
# ╚══════════════════════════════════════════════════════════════════════════════╝

[newrelic]
# License key - override with NEW_RELIC_LICENSE_KEY env var
license_key = ${NEW_RELIC_LICENSE_KEY}

# Application name - override with NEW_RELIC_APP_NAME env var
app_name = vote

# Logging configuration
log_file = stdout
log_level = info

# Agent enabled - can be disabled with NEW_RELIC_ENABLED=false
enabled = true

# High security mode - for compliance requirements
high_security = false

# Custom host for mock New Relic server
# Override with NEW_RELIC_HOST env var
host = ${NEW_RELIC_HOST:collector.newrelic.com}

# SSL configuration
ssl = true

# Proxy settings (if needed)
# proxy_host =
# proxy_port =

# Transaction tracer settings
[newrelic:transaction_tracer]
enabled = true
transaction_threshold = apdex_f
record_sql = obfuscated
stack_trace_threshold = 0.5
explain_enabled = true
explain_threshold = 0.5
top_n = 20

# Error collector settings
[newrelic:error_collector]
enabled = true
capture_events = true
max_event_samples_stored = 100
ignore_status_codes = 100-102 200-208 226 300-308

# Browser monitoring (Real User Monitoring)
[newrelic:browser_monitoring]
enabled = true
auto_instrument = true

# Distributed tracing
[newrelic:distributed_tracing]
enabled = true

# Span events for distributed tracing
[newrelic:span_events]
enabled = true
max_samples_stored = 2000

# Thread profiler
[newrelic:thread_profiler]
enabled = true

# Custom attributes
[newrelic:attributes]
enabled = true
include = request.headers.host request.method response.status

# Process host display name
[newrelic:process_host]
display_name = ${HOSTNAME}

# Application logging
[newrelic:application_logging]
enabled = true
forwarding.enabled = true
forwarding.max_samples_stored = 10000
metrics.enabled = true
local_decorating.enabled = true

# Infinite tracing (enterprise feature)
[newrelic:infinite_tracing]
enabled = false

# Labels for filtering in NR UI
[newrelic:labels]
Environment = ${ENVIRONMENT:dev}
Service = vote
Team = platform
